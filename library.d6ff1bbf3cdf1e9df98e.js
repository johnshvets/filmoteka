(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"0WdU":function(e,t){var n=document.querySelector(".button__watched"),r=document.querySelector(".button__queue");n.addEventListener("click",(function(){var e=localStorage.getItem("watchedMovieArr");if(0===JSON.parse(e).length)return void console.log("Пусто");console.log(e)})),r.addEventListener("click",(function(){var e=localStorage.getItem("queueMovieArr");if(0===JSON.parse(e).length)return void console.log("Пусто");console.log(e)}))},"7DKW":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("IlJM"),n("uQK7"),n("/YXa"),n("lmye"),n("D/wG"),n("wCa+"),n("SUr3"),n("JBxO"),n("FdtR"),n("WoWj"),n("U00V"),n("wcNg");function r(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function l(e){r(i,o,a,l,c,"next",e)}function c(e){r(i,o,a,l,c,"throw",e)}l(void 0)}))}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n("czhI").default,l="d3b4e2b6590fadf64c27140207cd1cc0",c=i.create({baseURL:"https://api.themoviedb.org/3/"}),u=function(){function e(){this.searchQuery="",this.page=1}var t,n,r,i=e.prototype;return i.fetchTrendingMovies=function(){var e=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("trending/movie/day?api_key="+l).then((function(e){return e.data}));case 3:return n=e.sent,t(n.page,n.total_pages),e.abrupt("return",n.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i.fetchMovieByID=function(){var e=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("movie/"+t+"?api_key="+l).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),i.fetchMovies=function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([t(n),this.fetchGenre()]);case 3:return r=e.sent,o=r[0],a=r[1],i=this.renderGenres(a,o),e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),i.fetchMoviesByKeyWord=function(){var e=o(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("search/movie?api_key="+l+"&query="+this.searchQuery+"&page="+this.page).then((function(e){return e.data}));case 3:return n=e.sent,t(n.page,n.total_pages),e.abrupt("return",n.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i.fetchGenre=function(){var e=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("genre/movie/list?api_key="+l).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",t.genres);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i.renderGenres=function(e,t){return t.map((function(t){var n=t.genre_ids,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["genre_ids"]),o=n.map((function(t){return e.find((function(e){return e.id===t})).name}));return Object.assign({},r,{genre_names:o})}))},i.incrementPage=function(){this.page+=1},i.decrementPage=function(){this.page-=1},i.resetPage=function(){this.page=1},t=e,(n=[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}])&&a(t.prototype,n),r&&a(t,r),e}()},CCs5:function(e,t,n){},L1EO:function(e,t,n){},OPH6:function(e,t,n){},gi7F:function(e,t,n){},hqZ7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("lYjL"),n("IlJM"),n("RtS0"),n("D/wG"),n("JBxO"),n("FdtR"),n("3dw1"),n("wcNg"),n("CCs5");var r=n("7DKW"),o=n("s9S4"),a=n.n(o);function i(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){i(a,r,o,l,c,"next",e)}function c(e){i(a,r,o,l,c,"throw",e)}l(void 0)}))}}var c={modalClose:document.querySelector(".lightbox_button"),modalWindow:document.querySelector(".js-lightbox"),overlay:document.querySelector(".lightbox_overlay"),filmInfo:document.querySelector(".lightbox_content"),body:document.querySelector("body")},u=new r.a;function s(e){"IMG"===e.target.tagName&&(!function(e){v.apply(this,arguments)}(e.target.id),c.modalWindow.classList.add("is-open"),c.modalClose.addEventListener("click",m),c.overlay.addEventListener("click",f),window.addEventListener("keydown",p))}function d(e){var t=a()(e);c.filmInfo.innerHTML=t;var n=JSON.parse(localStorage.getItem("watchedMovieArr"))||[],r=JSON.parse(localStorage.getItem("queueMovieArr"))||[];n.forEach((function(e){JSON.stringify(e)===JSON.stringify(0)&&0})),r.forEach((function(e){JSON.stringify(e)===JSON.stringify(0)&&0}));var o=document.querySelector(".film-buttons__queue");o.addEventListener("click",(function(){var t,n=[],r=localStorage.getItem("queueMovieArr");r&&(t=n).push.apply(t,JSON.parse(r));n.find((function(t){return t.name===e.name}))?n=n.filter((function(t){return t.name!==e.name})):n.push(e);localStorage.setItem("queueMovieArr",JSON.stringify(n)),a=localStorage.getItem("queueMovieArr"),JSON.parse(a).find((function(t){return t.name===e.name}))?(o.textContent="Delete from Queue",o.classList.add("delete-movie")):(o.textContent="Add to Queue",o.classList.remove("delete-movie"));var a}));var i=document.querySelector(".film-buttons__watched");i.addEventListener("click",(function(){var t,n=[],r=localStorage.getItem("watchedMovieArr");r&&(t=n).push.apply(t,JSON.parse(r));n.find((function(t){return t.name===e.name}))?n=n.filter((function(t){return t.name!==e.name})):n.push(e);localStorage.setItem("watchedMovieArr",JSON.stringify(n)),function(){var t=localStorage.getItem("watchedMovieArr");JSON.parse(t).find((function(t){return t.name===e.name}))?(i.textContent="Delete from Watched",i.classList.add("delete-movie")):(i.textContent="Add to Watched",i.classList.remove("delete-movie"))}()}));var l=localStorage.getItem("queueMovieArr");JSON.parse(l).length>0?(o.textContent="Delete from Queue",o.classList.add("delete-movie")):(o.textContent="Add to Queue",o.classList.remove("delete-movie"));var u=localStorage.getItem("watchedMovieArr");JSON.parse(u).length>0?(i.textContent="Delete from Watched",i.classList.add("delete-movie")):(i.textContent="Add to Watched",i.classList.remove("delete-movie"))}function m(){window.removeEventListener("keydown",p),c.overlay.removeEventListener("click",f),c.modalWindow.classList.remove("is-open"),c.body.classList.remove("modal-open"),addToQueueMovieBtn.removeEventListener("click",addToQueue1),addToWatchedMovieBtn.removeEventListener("click",addToWatched1)}function p(e){"Escape"===e.code&&m()}function f(e){e.currentTarget===e.target&&m()}function v(){return(v=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.fetchMovieByID(t);case 2:d(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},mgDI:function(e,t,n){},"s+qo":function(e,t,n){"use strict";n.r(t);n("L1EO"),n("hqZ7"),n("gi7F"),n("mgDI"),n("OPH6"),n("0WdU")},s9S4:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,o){var a,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n        <span class="film-item__genre">'+e.escapeExpression("function"==typeof(a=null!=(a=i(n,"name")||(null!=t?i(t,"name"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"name",hash:{},data:o,loc:{start:{line:29,column:39},end:{line:29,column:47}}}):a)+' <span style="color: #8C8C8C">/</span>\r\n        </span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,o){var a,i,l=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,u="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!-- Модалка --\x3e\r\n\r\n<div class="lightbox_image">\r\n  <img src="https://image.tmdb.org/t/p/w500'+s(typeof(i=null!=(i=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?i:c)===u?i.call(l,{name:"poster_path",hash:{},data:o,loc:{start:{line:4,column:43},end:{line:4,column:58}}}):i)+'" alt="'+s(typeof(i=null!=(i=d(n,"title")||(null!=t?d(t,"title"):t))?i:c)===u?i.call(l,{name:"title",hash:{},data:o,loc:{start:{line:4,column:65},end:{line:4,column:74}}}):i)+'" data-id="'+s(typeof(i=null!=(i=d(n,"id")||(null!=t?d(t,"id"):t))?i:c)===u?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:4,column:85},end:{line:4,column:91}}}):i)+'" class="film-image" />\r\n</div>\r\n\r\n<div class="ligthbox_info">\r\n  <h2 class="film-title">'+s(typeof(i=null!=(i=d(n,"title")||(null!=t?d(t,"title"):t))?i:c)===u?i.call(l,{name:"title",hash:{},data:o,loc:{start:{line:8,column:25},end:{line:8,column:34}}}):i)+'</h2>\r\n  <ul class="film-list">\r\n    <li class="film-item">\r\n      <p class="film-item__about">Vote / Votes</p>\r\n      <p class="film-item__description">\r\n        <span class="film-item__vote">'+s(typeof(i=null!=(i=d(n,"vote_average")||(null!=t?d(t,"vote_average"):t))?i:c)===u?i.call(l,{name:"vote_average",hash:{},data:o,loc:{start:{line:13,column:38},end:{line:13,column:54}}}):i)+'</span>\r\n        <span style="color: #8C8C8C">/</span>\r\n        <span class="film-item__votes">'+s(typeof(i=null!=(i=d(n,"vote_count")||(null!=t?d(t,"vote_count"):t))?i:c)===u?i.call(l,{name:"vote_count",hash:{},data:o,loc:{start:{line:15,column:39},end:{line:15,column:53}}}):i)+'</span>\r\n      </p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Popularity </p>\r\n      <p class="film-item__description popularity">'+s(typeof(i=null!=(i=d(n,"popularity")||(null!=t?d(t,"popularity"):t))?i:c)===u?i.call(l,{name:"popularity",hash:{},data:o,loc:{start:{line:20,column:51},end:{line:20,column:65}}}):i)+'</p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Original Title</p>\r\n      <p class="film-item__description">'+s(typeof(i=null!=(i=d(n,"original_title")||(null!=t?d(t,"original_title"):t))?i:c)===u?i.call(l,{name:"original_title",hash:{},data:o,loc:{start:{line:24,column:40},end:{line:24,column:58}}}):i)+'</p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Genre</p>\r\n      <p class="film-item__description genre">'+(null!=(a=d(n,"each").call(l,null!=t?d(t,"genres"):t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:28,column:46},end:{line:31,column:17}}}))?a:"")+'      </p>\r\n    </li>\r\n  </ul>\r\n  <p class="film-description__title">About</p>\r\n  <p class="film-description__about">'+s(typeof(i=null!=(i=d(n,"overview")||(null!=t?d(t,"overview"):t))?i:c)===u?i.call(l,{name:"overview",hash:{},data:o,loc:{start:{line:36,column:37},end:{line:36,column:49}}}):i)+'</p>\r\n\r\n  <div class="film-buttons">\r\n    <button data-name="watched" data-id="'+s(typeof(i=null!=(i=d(n,"id")||(null!=t?d(t,"id"):t))?i:c)===u?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:39,column:41},end:{line:39,column:47}}}):i)+'" class="modal-btn film-buttons__watched" type="button">Add\r\n      to\r\n      watched</button>\r\n    <button data-name="queue" data-id="'+s(typeof(i=null!=(i=d(n,"id")||(null!=t?d(t,"id"):t))?i:c)===u?i.call(l,{name:"id",hash:{},data:o,loc:{start:{line:42,column:39},end:{line:42,column:45}}}):i)+'" class="modal-btn film-buttons__queue" type="button">Add to\r\n      queue</button>\r\n  </div>\r\n</div>'},useData:!0})}},[["s+qo",0,1]]]);
//# sourceMappingURL=library.d6ff1bbf3cdf1e9df98e.js.map