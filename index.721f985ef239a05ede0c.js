(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"7DKW":function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t("IlJM"),t("uQK7"),t("/YXa"),t("lmye"),t("D/wG"),t("wCa+"),t("SUr3"),t("JBxO"),t("FdtR"),t("WoWj"),t("U00V"),t("wcNg");function r(e,n,t,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(a,o){var l=e.apply(n,t);function i(e){r(l,a,o,i,c,"next",e)}function c(e){r(l,a,o,i,c,"throw",e)}i(void 0)}))}}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=t("czhI").default,i="d3b4e2b6590fadf64c27140207cd1cc0",c=l.create({baseURL:"https://api.themoviedb.org/3/"}),u=function(){function e(){this.searchQuery="",this.page=1}var n,t,r,l=e.prototype;return l.fetchTrendingMovies=function(){var e=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("trending/movie/day?api_key="+i).then((function(e){return e.data}));case 3:return t=e.sent,n(t.page,t.total_pages),e.abrupt("return",t.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),l.fetchMovieByID=function(){var e=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("movie/"+n+"?api_key="+i).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),l.fetchMovies=function(){var e=a(regeneratorRuntime.mark((function e(n,t){var r,a,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n(t),this.fetchGenre()]);case 3:return r=e.sent,a=r[0],o=r[1],l=this.renderGenres(o,a),e.abrupt("return",l);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}(),l.fetchMoviesByKeyWord=function(){var e=a(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("search/movie?api_key="+i+"&query="+this.searchQuery+"&page="+this.page).then((function(e){return e.data}));case 3:return t=e.sent,n(t.page,t.total_pages),e.abrupt("return",t.results);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),l.fetchGenre=function(){var e=a(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.get("genre/movie/list?api_key="+i).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",n.genres);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l.renderGenres=function(e,n){return n.map((function(n){var t=n.genre_ids,r=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(n,["genre_ids"]),a=t.map((function(n){return e.find((function(e){return e.id===n})).name}));return Object.assign({},r,{genre_names:a})}))},l.incrementPage=function(){this.page+=1},l.decrementPage=function(){this.page-=1},l.resetPage=function(){this.page=1},n=e,(t=[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}])&&o(n.prototype,t),r&&o(n,r),e}()},"7nt2":function(e,n,t){},CCs5:function(e,n,t){},D5F5:function(e,n){},L1EO:function(e,n,t){},OPH6:function(e,n,t){},QfWi:function(e,n,t){"use strict";t.r(n);t("JBxO"),t("FdtR"),t("wcNg"),t("L1EO"),t("mgDI"),t("D5F5");var r=t("hqZ7"),a=(t("OPH6"),t("7nt2"),t("7DKW")),o=t("Wdqw"),l=t.n(o),i={mainContent:document.querySelector(".main-js"),searchMovieForm:document.querySelector(".form-js")},c=t("jffb"),u=t.n(c);function s(e,n,t,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function l(e){s(o,r,a,l,i,"next",e)}function i(e){s(o,r,a,l,i,"throw",e)}l(void 0)}))}}var p=new a.a;function d(e){"FORM"===e.target.tagName&&e.preventDefault(),"INPUT"===e.target.tagName&&(p.query=e.target.value),""!==p.query&&(p.resetPage(),i.mainContent.innerHTML="",function(){f.apply(this,arguments)}())}function f(){return(f=m(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.fetchMovies(p.fetchMoviesByKeyWord.bind(p),h);case 3:n=e.sent,console.log(n),v(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(e){var n=l()(e);i.mainContent.innerHTML=n}function h(e,n){console.log(e),console.log(n)}function g(e,n,t,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}function y(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function l(e){g(o,r,a,l,i,"next",e)}function i(e){g(o,r,a,l,i,"throw",e)}l(void 0)}))}}i.searchMovieForm.addEventListener("submit",d),i.searchMovieForm.addEventListener("input",u()(d,700));var w=new a.a;function _(e,n){console.log(e),console.log(n)}function b(){return(b=y(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.fetchMovies(w.fetchTrendingMovies.bind(w),_);case 3:n=e.sent,i.mainContent.innerHTML=l()(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){b.apply(this,arguments)}(),i.mainContent.addEventListener("click",r.a)},Wdqw:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,u="function",s=e.escapeExpression,m=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'  <li class="movie-card">\r\n    <img src="https://image.tmdb.org/t/p/w500'+s(typeof(l=null!=(l=m(t,"poster_path")||(null!=n?m(n,"poster_path"):n))?l:c)===u?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:45},end:{line:4,column:60}}}):l)+'" alt="'+s(typeof(l=null!=(l=m(t,"title")||(null!=n?m(n,"title"):n))?l:c)===u?l.call(i,{name:"title",hash:{},data:a,loc:{start:{line:4,column:67},end:{line:4,column:76}}}):l)+'" id="'+s(typeof(l=null!=(l=m(t,"id")||(null!=n?m(n,"id"):n))?l:c)===u?l.call(i,{name:"id",hash:{},data:a,loc:{start:{line:4,column:82},end:{line:4,column:88}}}):l)+'" class="movie-picture">\r\n    <div class="movie-info">\r\n      <h2 class="movie-title">'+s(typeof(l=null!=(l=m(t,"title")||(null!=n?m(n,"title"):n))?l:c)===u?l.call(i,{name:"title",hash:{},data:a,loc:{start:{line:6,column:30},end:{line:6,column:39}}}):l)+'</h2>\r\n      <p class="movie-genre">'+(null!=(o=m(t,"each").call(i,null!=n?m(n,"genre_names"):n,{name:"each",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:7,column:29},end:{line:7,column:68}}}))?o:"")+"| "+s(typeof(l=null!=(l=m(t,"release_date")||(null!=n?m(n,"release_date"):n))?l:c)===u?l.call(i,{name:"release_date",hash:{},data:a,loc:{start:{line:7,column:70},end:{line:7,column:86}}}):l)+"</p>\r\n    </div>\r\n  </li>\r\n"},2:function(e,n,t,r,a){return e.escapeExpression(e.lambda(n,n))+" "},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o;return'<ul class="movies-list">\r\n'+(null!=(o=(e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]})(t,"each").call(null!=n?n:e.nullContext||{},n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:2},end:{line:10,column:11}}}))?o:"")+"</ul>\r\n"},useData:!0})},hqZ7:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));t("lYjL"),t("IlJM"),t("RtS0"),t("D/wG"),t("JBxO"),t("FdtR"),t("3dw1"),t("wcNg"),t("CCs5");var r=t("7DKW"),a=t("s9S4"),o=t.n(a);function l(e,n,t,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){l(o,r,a,i,c,"next",e)}function c(e){l(o,r,a,i,c,"throw",e)}i(void 0)}))}}var c={modalClose:document.querySelector(".lightbox_button"),modalWindow:document.querySelector(".js-lightbox"),overlay:document.querySelector(".lightbox_overlay"),filmInfo:document.querySelector(".lightbox_content"),body:document.querySelector("body")},u=new r.a;function s(e){"IMG"===e.target.tagName&&(!function(e){v.apply(this,arguments)}(e.target.id),c.modalWindow.classList.add("is-open"),c.modalClose.addEventListener("click",p),c.overlay.addEventListener("click",f),window.addEventListener("keydown",d))}function m(e){var n=o()(e);c.filmInfo.innerHTML=n;var t=JSON.parse(localStorage.getItem("watchedMovieArr"))||[],r=JSON.parse(localStorage.getItem("queueMovieArr"))||[];t.forEach((function(e){JSON.stringify(e)===JSON.stringify(0)&&0})),r.forEach((function(e){JSON.stringify(e)===JSON.stringify(0)&&0}));var a=document.querySelector(".film-buttons__queue");a.addEventListener("click",(function(){var n,t=[],r=localStorage.getItem("queueMovieArr");r&&(n=t).push.apply(n,JSON.parse(r));t.find((function(n){return n.name===e.name}))?t=t.filter((function(n){return n.name!==e.name})):t.push(e);localStorage.setItem("queueMovieArr",JSON.stringify(t)),o=localStorage.getItem("queueMovieArr"),JSON.parse(o).find((function(n){return n.name===e.name}))?(a.textContent="Delete from Queue",a.classList.add("delete-movie")):(a.textContent="Add to Queue",a.classList.remove("delete-movie"));var o}));var l=document.querySelector(".film-buttons__watched");l.addEventListener("click",(function(){var n,t=[],r=localStorage.getItem("watchedMovieArr");r&&(n=t).push.apply(n,JSON.parse(r));t.find((function(n){return n.name===e.name}))?t=t.filter((function(n){return n.name!==e.name})):t.push(e);localStorage.setItem("watchedMovieArr",JSON.stringify(t)),function(){var n=localStorage.getItem("watchedMovieArr");JSON.parse(n).find((function(n){return n.name===e.name}))?(l.textContent="Delete from Watched",l.classList.add("delete-movie")):(l.textContent="Add to Watched",l.classList.remove("delete-movie"))}()}));var i=localStorage.getItem("queueMovieArr");JSON.parse(i).length>0?(a.textContent="Delete from Queue",a.classList.add("delete-movie")):(a.textContent="Add to Queue",a.classList.remove("delete-movie"));var u=localStorage.getItem("watchedMovieArr");JSON.parse(u).length>0?(l.textContent="Delete from Watched",l.classList.add("delete-movie")):(l.textContent="Add to Watched",l.classList.remove("delete-movie"))}function p(){window.removeEventListener("keydown",d),c.overlay.removeEventListener("click",f),c.modalWindow.classList.remove("is-open"),c.body.classList.remove("modal-open"),addToQueueMovieBtn.removeEventListener("click",addToQueue1),addToWatchedMovieBtn.removeEventListener("click",addToWatched1)}function d(e){"Escape"===e.code&&p()}function f(e){e.currentTarget===e.target&&p()}function v(){return(v=i(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.fetchMovieByID(n);case 2:m(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},mgDI:function(e,n,t){},s9S4:function(e,n,t){var r=t("mp5j");e.exports=(r.default||r).template({1:function(e,n,t,r,a){var o,l=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n        <span class="film-item__genre">'+e.escapeExpression("function"==typeof(o=null!=(o=l(t,"name")||(null!=n?l(n,"name"):n))?o:e.hooks.helperMissing)?o.call(null!=n?n:e.nullContext||{},{name:"name",hash:{},data:a,loc:{start:{line:29,column:39},end:{line:29,column:47}}}):o)+' <span style="color: #8C8C8C">/</span>\r\n        </span>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,r,a){var o,l,i=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,u="function",s=e.escapeExpression,m=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\x3c!-- Модалка --\x3e\r\n\r\n<div class="lightbox_image">\r\n  <img src="https://image.tmdb.org/t/p/w500'+s(typeof(l=null!=(l=m(t,"poster_path")||(null!=n?m(n,"poster_path"):n))?l:c)===u?l.call(i,{name:"poster_path",hash:{},data:a,loc:{start:{line:4,column:43},end:{line:4,column:58}}}):l)+'" alt="'+s(typeof(l=null!=(l=m(t,"title")||(null!=n?m(n,"title"):n))?l:c)===u?l.call(i,{name:"title",hash:{},data:a,loc:{start:{line:4,column:65},end:{line:4,column:74}}}):l)+'" data-id="'+s(typeof(l=null!=(l=m(t,"id")||(null!=n?m(n,"id"):n))?l:c)===u?l.call(i,{name:"id",hash:{},data:a,loc:{start:{line:4,column:85},end:{line:4,column:91}}}):l)+'" class="film-image" />\r\n</div>\r\n\r\n<div class="ligthbox_info">\r\n  <h2 class="film-title">'+s(typeof(l=null!=(l=m(t,"title")||(null!=n?m(n,"title"):n))?l:c)===u?l.call(i,{name:"title",hash:{},data:a,loc:{start:{line:8,column:25},end:{line:8,column:34}}}):l)+'</h2>\r\n  <ul class="film-list">\r\n    <li class="film-item">\r\n      <p class="film-item__about">Vote / Votes</p>\r\n      <p class="film-item__description">\r\n        <span class="film-item__vote">'+s(typeof(l=null!=(l=m(t,"vote_average")||(null!=n?m(n,"vote_average"):n))?l:c)===u?l.call(i,{name:"vote_average",hash:{},data:a,loc:{start:{line:13,column:38},end:{line:13,column:54}}}):l)+'</span>\r\n        <span style="color: #8C8C8C">/</span>\r\n        <span class="film-item__votes">'+s(typeof(l=null!=(l=m(t,"vote_count")||(null!=n?m(n,"vote_count"):n))?l:c)===u?l.call(i,{name:"vote_count",hash:{},data:a,loc:{start:{line:15,column:39},end:{line:15,column:53}}}):l)+'</span>\r\n      </p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Popularity </p>\r\n      <p class="film-item__description popularity">'+s(typeof(l=null!=(l=m(t,"popularity")||(null!=n?m(n,"popularity"):n))?l:c)===u?l.call(i,{name:"popularity",hash:{},data:a,loc:{start:{line:20,column:51},end:{line:20,column:65}}}):l)+'</p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Original Title</p>\r\n      <p class="film-item__description">'+s(typeof(l=null!=(l=m(t,"original_title")||(null!=n?m(n,"original_title"):n))?l:c)===u?l.call(i,{name:"original_title",hash:{},data:a,loc:{start:{line:24,column:40},end:{line:24,column:58}}}):l)+'</p>\r\n    </li>\r\n    <li class="film-item">\r\n      <p class="film-item__about">Genre</p>\r\n      <p class="film-item__description genre">'+(null!=(o=m(t,"each").call(i,null!=n?m(n,"genres"):n,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:28,column:46},end:{line:31,column:17}}}))?o:"")+'      </p>\r\n    </li>\r\n  </ul>\r\n  <p class="film-description__title">About</p>\r\n  <p class="film-description__about">'+s(typeof(l=null!=(l=m(t,"overview")||(null!=n?m(n,"overview"):n))?l:c)===u?l.call(i,{name:"overview",hash:{},data:a,loc:{start:{line:36,column:37},end:{line:36,column:49}}}):l)+'</p>\r\n\r\n  <div class="film-buttons">\r\n    <button data-name="watched" data-id="'+s(typeof(l=null!=(l=m(t,"id")||(null!=n?m(n,"id"):n))?l:c)===u?l.call(i,{name:"id",hash:{},data:a,loc:{start:{line:39,column:41},end:{line:39,column:47}}}):l)+'" class="modal-btn film-buttons__watched" type="button">Add\r\n      to\r\n      watched</button>\r\n    <button data-name="queue" data-id="'+s(typeof(l=null!=(l=m(t,"id")||(null!=n?m(n,"id"):n))?l:c)===u?l.call(i,{name:"id",hash:{},data:a,loc:{start:{line:42,column:39},end:{line:42,column:45}}}):l)+'" class="modal-btn film-buttons__queue" type="button">Add to\r\n      queue</button>\r\n  </div>\r\n</div>'},useData:!0})}},[["QfWi",0,1]]]);
//# sourceMappingURL=index.721f985ef239a05ede0c.js.map